@import "config.less";
@import "mixin.less";

// timeline主体  会滚动的哦~(中的ul会有高度)
#timeline{
    position: relative;
    z-index: 100;
    float: left;
    // 为何此时的宽度为 #main总宽度 - #main padding? 而不是总宽度```
    width: 100%;
    // width: 70%;
    // width: 50%;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    // background-color: rgba(43, 133, 195,0.125);
    background-color: @timelineBGC;
    .tst( width 500ms ease;);

    #itermCtn{
        position: absolute;
        left: 50%;
        right: 0;
        top: 0px;
        // 宽度百分百 会带来一些问题  如linetag位置会由于iterm宽度有小数点时发生轻微的不对齐
        width: @itermCtnW;
        min-height: 100%;
        margin-left: -@itermCtnW/2;
        list-style: none;

        &:before{
            content: '';
            display: block;
            position: absolute;
            height: 100%;
            width: @lineW;
            left: 50%;
            margin-left: -@lineW/2;
            // background-color: rgba(0,0,0,0.25);
            background-color: #fff;
        }
    }
    #itermCtn{
        .iterm{
            position: absolute;
            width: @itermW;
            z-index: @lineZindex + 100;
            .tst( top ease 500ms; opacity ease 500ms; );

            &.raw{
                opacity: 0;
            }

            // outline: 2px solid pink;

            .bubble{
                position: relative;
                z-index: @lineZindex + 200;
                width: @bubbleW;
                padding: @bubblePadding;
                background-color: @bubbleBGC;
                color: @bubbleC;
                border: 1px solid #ddd;
                border-bottom: none;
                .border-radius();
                // .box-shadow( 0 0 3px rgba(0,0,0,0.375); );
                // .box-shadow( 5px 8px 0 -2px rgba(0,0,0,0.125); );
                .box-shadow( 0 3px 0 fadeOut(@headerBGC, 50%); );
            }
            .bubble{

                &:before{
                    content: '';
                    display: block;
                    position: absolute;
                    z-index: @lineZindex + 200 + 20;
                    top: @linetagCommonTop + ( @linetagW - @bubbleTriW)/2;
                    width: @bubbleTriW;
                    height: @bubbleTriW;
                    // background-color: @bubbleBGC;
                    background-color: @topBGC;
                    // box-shadow 和 transform的诡异结合```实现tri的单方向阴影
                    // .box-shadow( 1px -1px 3px -1px rgba(0,0,0,0.5); );
                    .tsf(rotate(45deg));
                }
                // &:after{
                //     content: '';
                //     display: block;
                //     position: absolute;
                //     z-index: @lineZindex + 200 - 10;
                //     top: @linetagCommonTop + ( @linetagW - @bubbleTriW)/2 + 2px;
                //     width: @bubbleTriW;
                //     height: @bubbleTriW;
                //     background-color: fadeOut(@headerBGC, 50%);
                //     .tsf(rotate(45deg));
                // }
                .top, .middle, .bottom{
                    padding: 0 0.5em;
                }
                .top{
                    position: relative;   //为使.tri不挡在标题前面 又有自己的阴影且不被投上bubble的阴影, 必须给top一个 z-index值  使.tri的伪元素被夹在bubble上和top下的夹层里面
                    padding: 4px;
                    .border-radius( 4px 4px 0 0;);
                    border: none;
                    border-bottom: 1px solid #E6E5E4;
                    background-color: @topBGC;

                    z-index: @lineZindex + 200 + 40;
                    // z-index: 450;
                    cursor: pointer;

                    h1, h2, h3, h4,{
                        font-size: 1.125em;
                    }
                }
                .middle{
                    padding: 0.5em;
                    min-height: 60px;
                    p{
                        font-size: 0.875em;
                        margin: 0.55em 0;
                        line-height: 1.25em;
                    }
                }
                .bottom{
                    padding: 0.5em;
                    background-color: #f5f5f5;
                    .date{
                        float: right;
                        font-size: 12px;
                        font-style: italic;
                    }
                }

                .linetag{
                    position: absolute;
                    z-index: @lineZindex + 50;
                    top: @linetagCommonTop;
                    width: @linetagW;
                    height: @linetagW;
                    color: #fff;
                    background-color: @linetagBGC;
                    border: 0px solid #FF968F;
                    .border-radius( @linetagW/2 );
                    // 加个延时,快速划过时不变换
                    .tst( all 230ms ease-in-out 40ms;);
                }
                &:hover .linetag{
                    top: @linetagXTop;
                    width: @linetagXW;
                    height: @linetagXW;
                    background-color: @linetagBGC;
                    border: @linetagXW/2 solid #FF968F;

                    .border-radius( @linetagXW/2 );
                }
            }

            h1,h2,h3,h4, p{
                margin: 0.25em 0;
            }

            // &.left, &.right{
            //     outline: 1px solid pink;
            // }
            &.left{
                opacity: 1;
                left: @leftLeft;

                .bubble{
                    margin-left: 0;
                    &:before, &:after{
                        right: -@bubbleTriW/2;
                        .box-shadow( 2px 0 0 fadeOut(@headerBGC, 50%); );
                    }
                    .linetag{
                        left: 100% + percentage((100%-@bubbleW)/@bubbleW);
                        margin-left: -@linetagW/2;
                    }
                    &:hover .linetag{
                        margin-left: -@linetagXW/2;
                    }
                }
            }
            &.right{
                opacity: 1;
                left: @rightLeft;
                .bubble{
                    margin-left: 100% - @bubbleW;
                    &:before, &:after{
                        left: -@bubbleTriW/2;
                        // 微调阴影方向
                        // .box-shadow( -1px 1px 3px -1px rgba(0,0,0,0.5); );
                        .box-shadow( 0 2px 0 fadeOut(@headerBGC, 50%); );
                    }

                    .linetag{
                        left: -(percentage((100%-@bubbleW)/@bubbleW));
                        margin-left: -@linetagW/2;
                    }
                    &:hover .linetag{
                        margin-left: -@linetagXW/2;
                    }
                }
            }

        //here ends .iterm 
        }

    //here ends #itermCtn 
    }

//here ends #timeline 
}


/*------------------ test ------------------*/
#itermCtn{
    /*--- persudo as line, suc! ---*/
}